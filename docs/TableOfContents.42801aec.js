import{_,p as b,h as v}from"./chunks/hooks.module.91ff0612.js";import{l as m,p as w}from"./chunks/preact.module.dfa46238.js";const{replace:y}="",k=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,O={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},$=r=>O[r],C=r=>y.call(r,k,$);var I=0;function a(r,s,c,u,f){var n,t,o={};for(t in s)t=="ref"?n=s[t]:o[t]=s[t];var l={type:r,props:o,key:c,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--I,__source:f,__self:u};if(typeof r=="function"&&(n=r.defaultProps))for(t in n)o[t]===void 0&&(o[t]=n[t]);return m.vnode&&m.vnode(l),l}const D=({headings:r=[],currentPage:s})=>{const c=_(),u="on-this-page-heading",f=_([]),[n,t]=b("overview");v(()=>{const e=()=>{const p=document.querySelectorAll("article :is(h1, h2, h3, h4)");f.current=Array.from(p).map(i=>({id:i.id,topOffset:i.getBoundingClientRect().top+window.scrollY}))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),v(()=>{if(!c.current)return;const e=d=>{for(const h of d)if(h.isIntersecting){const{id:g}=h.target;if(g===u)continue;t(h.target.id);break}},p={rootMargin:"-100px 0% -66%",threshold:1},i=new IntersectionObserver(e,p);return document.querySelectorAll("article :is(h1,h2,h3)").forEach(d=>i.observe(d)),()=>i.disconnect()},[c.current]);const o=e=>{t(e.target.getAttribute("href").replace("#",""))},l=1;return a(w,{children:a("ul",{ref:c,children:r.filter(({depth:e})=>e>=l&&e<4).map(e=>a("li",{className:"w-full",children:a("a",{href:`${s}#${e.slug}`,onClick:o,className:`py-0.5 block cursor-pointer w-full border-l-4 border-header hover:bg-header ${["pl-4","pl-9","pl-12"][e.depth-l]} ${n===e.slug?"bg-header":""}`.trim(),children:C(e.text)})}))})})};export{D as default};
